##### *redis 为什么是单线程的*

因为 cpu 不是 Redis 的瓶颈，Redis 的瓶颈最有可能是机器内存或者网络带宽。既然单线程容易实现，而且 cpu 又不会成为瓶颈，那就顺理成章地采用单线程的方案了。

关于 Redis 的性能，官方网站也有，普通笔记本轻松处理每秒几十万的请求。而且单线程并不代表就慢，nginx 和 nodejs 也都是高性能单线程的代表。



##### *何为缓存穿透，解决方法*

缓存穿透：指**查询一个一定不存在的数据**，由于缓存是**不命中时**需要**从数据库查询**，数据库中**查不到数据则不写入缓存**，这将导致这个不存在的数据**每次请求都要到数据库去查询**，造成缓存穿透。

解决方案：最简单粗暴的方法如果一个查询返回的数据为空（不管是数据不存在，还是系统故障），我们就**把这个空结果进行缓存**，但它的**过期时间会很短**，**最长不超过五分钟**。



##### *redis 支持的 java 客户端都有哪些*

Redisson、Jedis、lettuce等等。



##### *怎么保证缓存和数据库数据的一致性*

- 合理**设置缓存的过期时间**。
- **新增、更改、删除**数据库操作时**同步更新 Redis**，可以使用事物机制来保证数据的一致性。



##### *redis 持久化*

RDB（Redis Database）：指定的时间间隔能对你的数据进行快照存储。
AOF（Append Only File）：每一个收到的写命令都通过write函数追加到文件中。



##### *redis 如何做内存优化*

**尽可能使用散列表（hashes）**，散列表（是说散列表里面存储的数少）使用的内存非常小，所以你应该尽可能的将你的数据模型抽象到一个散列表里面。

举个栗子：

比如你的web系统中有一个用户对象，不要为这个用户的名称，姓氏，邮箱，密码设置单独的key，而是应该**把这个用户的所有信息存储到一张散列表里面**。



##### *单线程的redis为什么执行速度如此之快*

- 基于**内存**实现，完全内存计算；
- 单线程操作，**避免了线程上下文切换操作**；
- **多路I/O复用的线程模型**，实现了一个线程监控多个IO流，及时响应请求；
- redis对外部的依赖比较少，属于**轻量级内存数据库**。

<u>解析：</u>

redis的线程模型**多路I/O复用机制**是一个比较重要并且常见的考察点。目前支持I/O多路复用的系统调用有**select，pselect，poll，epoll**等函数。I/O多路复用就是通过一种机制**一个进程可以监视多个描述符**，一旦某个描述符读就绪或者写就绪，其能够通知应用程序进行相应的读写操作。

**多路I/O复用机制**与多进程和多线程技术相比系统开销小，系统不必创建进程/线程，也不必维护这些进程/线程，从而大大减小了系统的开销。



##### *redis 淘汰策略有哪些*

- volatile-lru：从已设置过期时间的数据集（server. db[i]. expires）中挑选**最近最少使用的数据淘汰**。
- volatile-ttl：从已设置过期时间的数据集（server. db[i]. expires）中挑选**将要过期的数据**淘汰。
- volatile-random：从已设置过期时间的数据集（server. db[i]. expires）中**任意选择数据**淘汰。
- allkeys-lru：从**数据集**（server. db[i]. dict）中挑选**最近最少使用的数据**淘汰。
- allkeys-random：从数据集（server. db[i]. dict）中任意选择数据淘汰。
- no-enviction（驱逐）：禁止驱逐数据。



##### *redis 常见的性能问题有哪些？该如何解决？*

主服务器写内存快照，会阻塞主线程的工作，**当快照比较大时对性能影响是非常大的**，会间断性暂停服务，所以主服务器最好不要写内存快照。
Redis 主从复制的性能问题，为了主从复制的速度和连接的稳定性，主从库最好在同一个局域网内。



##### *redis相比memcached有哪些优势*

- memcached所有的值均是简单的字符串，redis作为其替代者，支持更为丰富的数据类型。
- redis的速度比memcached快很多，并且redis支持数据的持久化。
- redis支持数据的备份，即master-slave模式的数据备份。
- 使用底层模型不同，它们之间底层实现方式 以及与客户端之间通信的应用协议不一样。redis自己构建了VM 管理机制。
- value大小不同，redis最大可以达到512MB，而memcache只有1MB。



##### *redis的配置文件*

- **NETWORK：**该模块可以配置一些redis服务器地址，端口以及超时时间等
- **GENERAL：**该模块可以对日志文件的路径和日志级别等进行配置
- **SNAPSHOTTING：**redis持久化配置信息等
- **REPLICATION：**redis集群配置等信息
- **MEMORY MANAGEMENT：**内存管理，包括数据过期删除策略信息的设置
- **APPEND ONLY MODE：**日志持久化方式信息设置